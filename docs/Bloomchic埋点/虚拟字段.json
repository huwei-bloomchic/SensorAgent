[
    {
        "expression_source": "SQL",
        "id": 17,
        "name": "is_spider_ip",
        "cname": "是否疑似爬虫IP",
        "table_type": 0,
        "create_time": "2023-07-28 15:10:11",
        "update_time": "2025-12-03 17:59:45",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when\nconcat(split_part(events.$ip,'.',1),'.',split_part(events.$ip,'.',2),'.',split_part(events.$ip,'.',3)) \nin ('69.63.184','173.252.127','173.252.87','66.220.149','69.171.234','69.171.249','173.252.95','69.171.251','31.13.127','31.13.115','69.171.231','69.63.189','54.236.1','173.252.82','74.125.216','98.158.230','69.171.230','116.179.33','98.158.231','202.46.63','40.77.177','173.252.107','65.55.210','40.77.179','66.102.9','40.77.178','173.252.70','66.249.81','104.154.193','135.181.61','64.233.173','205.169.39','43.173.180','43.173.181','66.249.92','192.178.8','72.14.199','66.249.89','66.249.88','74.125.208','66.249.87','135.181.22','69.31.136','69.63.184','173.252.127','173.252.87','66.220.149','173.252.95','69.171.234','173.252.82','54.236.1','69.63.189','69.171.231','31.13.127','31.13.115','136.119.129') \nthen '疑似异常IP' else '正常IP' end\n",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 20,
        "name": "ip_prefix",
        "cname": "IP前3段",
        "table_type": 0,
        "create_time": "2023-08-17 11:12:12",
        "update_time": "2023-08-17 11:12:20",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "concat(split_part(events.$ip,'.',1),'.',split_part(events.$ip,'.',2),'.',split_part(events.$ip,'.',3))",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 21,
        "name": "url_utm_source",
        "cname": "$url中的utm_source",
        "table_type": 0,
        "create_time": "2023-11-20 10:35:44",
        "update_time": "2025-11-14 18:47:26",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url), 'QUERY', 'utm_source')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 22,
        "name": "url_utm_medium",
        "cname": "$url中的utm_medium",
        "table_type": 0,
        "create_time": "2023-11-20 10:43:33",
        "update_time": "2025-11-14 18:47:06",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url), 'QUERY', 'utm_medium')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 23,
        "name": "url_utm_campaign",
        "cname": "$url中utm_campaign",
        "table_type": 0,
        "create_time": "2023-11-20 10:46:20",
        "update_time": "2025-11-14 18:48:22",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url), 'QUERY', 'utm_campaign')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 24,
        "name": "url_bc_id",
        "cname": "url_bc_id",
        "table_type": 0,
        "create_time": "2023-11-20 14:41:40",
        "update_time": "2025-11-14 18:46:53",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url), 'QUERY', 'bc_id')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 25,
        "name": "CollectionHandle",
        "cname": "CollectionHandle",
        "table_type": 0,
        "create_time": "2024-01-16 17:33:55",
        "update_time": "2024-01-16 17:35:02",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.web_platform_type in ('Mobile_Web', 'PC_Web') , regexp_extract(events.$url,'collections/([a-zA-Z0-9\\-]*)',1),events.collection_handle)",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 33,
        "name": "item_product_tags",
        "cname": "商品标签",
        "table_type": 0,
        "create_time": "2024-04-11 10:05:43",
        "update_time": "2024-04-11 10:05:45",
        "data_type": "LIST",
        "has_dict": false,
        "expression": "items.tags",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 34,
        "name": "item_product_category",
        "cname": "商品类目",
        "table_type": 0,
        "create_time": "2024-04-11 10:06:28",
        "update_time": "2024-04-11 10:06:30",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.category",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 35,
        "name": "item_product_handle",
        "cname": "商品handle",
        "table_type": 0,
        "create_time": "2024-04-11 10:06:59",
        "update_time": "2024-04-11 10:07:00",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.handle",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 36,
        "name": "item_product_current_price",
        "cname": "最新商品现价",
        "table_type": 0,
        "create_time": "2024-04-11 10:08:49",
        "update_time": "2024-12-10 09:57:43",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast(items.current_price as float)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 37,
        "name": "item_product_origin_price",
        "cname": "最新商品原价",
        "table_type": 0,
        "create_time": "2024-04-11 10:09:25",
        "update_time": "2024-12-10 09:57:32",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast(items.origin_price as float)\n",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 38,
        "name": "item_comment_count",
        "cname": "最新商品评论数",
        "table_type": 0,
        "create_time": "2024-04-20 14:59:29",
        "update_time": "2025-01-17 23:05:20",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast(items.comment_count as int)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 39,
        "name": "item_comment_rating",
        "cname": "商品评分",
        "table_type": 0,
        "create_time": "2024-04-20 15:03:02",
        "update_time": "2024-04-20 15:03:04",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast(items.comment_rating as float)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 40,
        "name": "item_discount",
        "cname": "最新商品折扣金额",
        "table_type": 0,
        "create_time": "2024-04-20 15:05:22",
        "update_time": "2025-01-17 23:04:51",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast(items.discount as float)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 41,
        "name": "is_new_order_users",
        "cname": "新老订单用户-自然日",
        "table_type": 0,
        "create_time": "2024-05-06 15:22:33",
        "update_time": "2024-09-03 09:22:32",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.first_order_time is null  or datediff(events.time,unix_millis_to_timestamp(users.first_order_time))<=0 then '新用户' else  '老用户' end",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 42,
        "name": "is_new_visit_users",
        "cname": "新访问用户",
        "table_type": 0,
        "create_time": "2024-05-11 11:24:19",
        "update_time": "2025-11-10 16:40:48",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.$first_visit_time is null  then '未知'\nwhen unix_timestamp(events.time) - users.$first_visit_time/1000 < 86400 then '新访问' else  '老访问' end",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 43,
        "name": "user_member_level",
        "cname": "用户等级",
        "table_type": 0,
        "create_time": "2024-05-31 17:14:34",
        "update_time": "2024-05-31 17:24:57",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.become_member_3_time is not null and unix_timestamp(events.time) > users.become_member_3_time and ( users.become_member_2_time is null or users.become_member_3_time > users.become_member_2_time) and ( users.become_member_1_time is null or users.become_member_3_time > users.become_member_1_time)  then 'Level3' \nwhen \nusers.become_member_2_time is not null and unix_timestamp(events.time) > users.become_member_2_time and ( users.become_member_1_time is null or users.become_member_2_time > users.become_member_1_time) then 'Level2'\nwhen \nusers.become_member_1_time is not null and unix_timestamp(events.time) > users.become_member_1_time  then 'Level1'\nelse  '非会员' end",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 44,
        "name": "lastest_member_level",
        "cname": "用户最新会员等级",
        "table_type": 0,
        "create_time": "2024-05-31 17:30:18",
        "update_time": "2024-05-31 17:30:20",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.member_level is not null then users.member_level\nelse  '非会员' end",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 45,
        "name": "format_media_url",
        "cname": "format_media_url",
        "table_type": 0,
        "create_time": "2024-07-04 11:39:40",
        "update_time": "2024-07-04 11:41:49",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(substring(events.media_url,1,2) = '//',concat('https:',events.media_url),events.media_url)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 46,
        "name": "item_details_season",
        "cname": "商品季节",
        "table_type": 0,
        "create_time": "2024-07-09 17:51:34",
        "update_time": "2024-07-09 17:51:36",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.details_season",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 48,
        "name": "is_new_order_users_2",
        "cname": "新老订单用户-24H",
        "table_type": 0,
        "create_time": "2024-09-02 18:30:37",
        "update_time": "2025-11-10 16:40:09",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.first_order_time is null or unix_timestamp(events.time) - users.first_order_time/1000 < 86400 then '新订单用户' else  '老订单用户' end\n\n\n",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 49,
        "name": "url_utm_content",
        "cname": "url中的utm_content",
        "table_type": 0,
        "create_time": "2024-09-04 14:00:19",
        "update_time": "2025-11-14 18:48:48",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url), 'QUERY', 'utm_content')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 51,
        "name": "product_page_module_collection",
        "cname": "商品曝光来源",
        "table_type": 0,
        "create_time": "2024-09-21 11:28:52",
        "update_time": "2024-09-21 12:52:06",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "concat(events.page_code, '&',  if(events.module_name = '商品列表','商品集合页',events.module_name),'&',if(events.collection_handle is null,'',events.collection_handle)) ",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 52,
        "name": "item_publish_day",
        "cname": "商品发布天数",
        "table_type": 0,
        "create_time": "2024-09-24 12:53:42",
        "update_time": "2024-09-24 12:57:15",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "cast((unix_timestamp(events.time) - items.pub_time/1000)/86400 as int)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 53,
        "name": "click_url_handle",
        "cname": "ClickUrl的Handle",
        "table_type": 0,
        "create_time": "2024-10-15 17:19:42",
        "update_time": "2024-10-15 17:19:44",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "REGEXP_EXTRACT(events.click_url, '^(?:https://bloomchic.com)?(/[^/]+/)(.*)?$', 2)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 54,
        "name": "combine_recommend_size",
        "cname": "推荐尺码",
        "table_type": 0,
        "create_time": "2024-11-06 17:01:54",
        "update_time": "2024-11-06 17:01:58",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.recommended_size is null,events.recommend_size,events.recommended_size)",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 55,
        "name": "latest_ad_bc_id",
        "cname": "最近bc_id",
        "table_type": 0,
        "create_time": "2024-11-13 14:04:08",
        "update_time": "2024-11-13 14:04:10",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(events.latest_ad_landing_page, 'QUERY', 'bc_id')",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 57,
        "name": "fixed_latest_fb_ad_url",
        "cname": "修复FB最近广告链接",
        "table_type": 0,
        "create_time": "2024-11-15 18:53:47",
        "update_time": "2024-11-15 18:54:02",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.fb_latest_ad_landing_page is not null,events.fb_latest_ad_landing_page,events.latest_ad_landing_page)",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 58,
        "name": "latest_ad_visit_hours",
        "cname": "最近点击广告小时数",
        "table_type": 0,
        "create_time": "2024-11-18 11:46:30",
        "update_time": "2024-12-24 13:39:43",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "if(events.latest_ad_time>0,cast((unix_timestamp(events.time) - events.latest_ad_time)/3600 as int),null)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 59,
        "name": "resource_module_index",
        "cname": "模块中的位置",
        "table_type": 0,
        "create_time": "2024-12-04 19:01:02",
        "update_time": "2024-12-04 19:01:38",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "ROUND((events.web_module_number - FLOOR(events.web_module_number))*10,1)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 60,
        "name": "handle_in_url",
        "cname": "url中的handle",
        "table_type": 0,
        "create_time": "2024-12-25 10:50:13",
        "update_time": "2025-11-14 18:45:56",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "regexp_extract(parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url),'PATH'),'/(products|collections|pages)/([a-z\\-0-9]+)',2)\n",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 61,
        "name": "fixed_site_code",
        "cname": "站点标识",
        "table_type": 0,
        "create_time": "2025-01-08 11:30:34",
        "update_time": "2025-01-08 11:31:19",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.`time` is not null,if(events.site_code is null,'SPUS',events.site_code),'NULL')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 62,
        "name": "path_in_url",
        "cname": "url中的path",
        "table_type": 0,
        "create_time": "2025-01-09 09:37:00",
        "update_time": "2025-01-09 09:37:03",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,events.$url,events.$deeplink_url), 'PATH')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 63,
        "name": "product_discount_percent",
        "cname": "商品折扣率",
        "table_type": 0,
        "create_time": "2025-01-17 23:03:35",
        "update_time": "2025-01-17 23:09:44",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "1-events.web_current_price/events.web_original_price",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 64,
        "name": "item_latest_sale_country_list",
        "cname": "商品最新销售地区",
        "table_type": 0,
        "create_time": "2025-01-18 10:08:51",
        "update_time": "2025-01-18 10:08:53",
        "data_type": "LIST",
        "has_dict": false,
        "expression": "items.sales_country_list",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 65,
        "name": "user_is_new_order_users",
        "cname": "新老订单用户",
        "table_type": 1,
        "create_time": "2025-01-20 12:14:00",
        "update_time": "2025-01-20 12:14:02",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "case when \nusers.first_order_time is null  or datediff(now(),unix_millis_to_timestamp(users.first_order_time))<=0 then '新用户' else  '老用户' end",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 66,
        "name": "is_preorder_product",
        "cname": "预售商品",
        "table_type": 0,
        "create_time": "2025-04-29 13:40:34",
        "update_time": "2025-04-29 13:45:17",
        "data_type": "BOOL",
        "has_dict": false,
        "expression": "cast(events.preorder_left_date as int) > 2",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 67,
        "name": "item_cate_1",
        "cname": "商品一级品类",
        "table_type": 0,
        "create_time": "2025-05-07 09:40:54",
        "update_time": "2025-05-07 09:40:56",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.cate_1",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 68,
        "name": "item_cate_2",
        "cname": "商品二级品类",
        "table_type": 0,
        "create_time": "2025-05-07 09:41:32",
        "update_time": "2025-05-07 09:41:35",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.cate_2",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 69,
        "name": "item_cate_3",
        "cname": "商品三级品类",
        "table_type": 0,
        "create_time": "2025-05-07 09:42:06",
        "update_time": "2025-05-07 09:42:08",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "items.cate_3",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 70,
        "name": "extra_spu_from_sku",
        "cname": "修复SPU(从SKU中提取)",
        "table_type": 0,
        "create_time": "2025-09-02 18:35:49",
        "update_time": "2025-09-02 18:35:57",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "substr(events.product_sku,1,14)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 71,
        "name": "fixed_fp_id",
        "cname": "修复fp_id",
        "table_type": 0,
        "create_time": "2025-09-27 21:30:08",
        "update_time": "2025-10-16 16:36:55",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.b_fp = '' or events.fp_id is null,if(events.$url like '%b_fp=%',base64decode(replace(parse_url(events.$url, 'QUERY', 'b_fp'),'%3D','=')), events.$device_id),events.b_fp)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 72,
        "name": "user_ages",
        "cname": "用户年龄",
        "table_type": 1,
        "create_time": "2025-10-16 23:12:13",
        "update_time": "2025-10-16 23:12:14",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "(unix_timestamp(now()) - users.birth_date)/(365*86400)",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 73,
        "name": "product_size_code",
        "cname": "商品尺码Code",
        "table_type": 0,
        "create_time": "2025-10-17 00:04:13",
        "update_time": "2025-10-17 00:04:15",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "  CASE substr(events.product_sku, length(events.product_sku) - 2)\n    WHEN 'FM4' THEN '5X-6X'\n    WHEN 'FM2' THEN '1X-2X'\n    WHEN 'FM3' THEN '3X-4X'\n    WHEN 'FM7' THEN '4X-6X'\n    WHEN 'FM6' THEN '2X-3X'\n    WHEN 'FM5' THEN 'M-1X'\n    WHEN 'FM9' THEN '3X-6X'\n    WHEN 'FM1' THEN 'M-L'\n    WHEN 'FM8' THEN 'M-2X'\n    WHEN 'CM5' THEN '4X'\n    WHEN 'CM6' THEN '5X'\n    WHEN 'CM4' THEN '3X'\n    WHEN 'CM3' THEN '2X'\n    WHEN 'CM2' THEN '1X'\n    WHEN 'CM1' THEN 'L'\n    WHEN 'CT3' THEN '3X'\n    WHEN 'CT2' THEN '2X'\n    WHEN 'CT1' THEN '1X'\n    WHEN '270' THEN '27'\n    WHEN '265' THEN '26.5'\n    WHEN '260' THEN '26'\n    WHEN '255' THEN '25.5'\n    WHEN '250' THEN '25'\n    WHEN '245' THEN '24.5'\n    WHEN '240' THEN '24'\n    WHEN '235' THEN '23.5'\n    WHEN '230' THEN '23'\n    WHEN '225' THEN '22.5'\n    WHEN 'FAL' THEN 'One Size'\n    WHEN 'C09' THEN '6X'\n    WHEN 'C08' THEN '5X'\n    WHEN 'C07' THEN '4X'\n    ELSE NULL\n  END",
        "related_mode": "AND"
    },
    {
        "expression_source": "SQL",
        "id": 74,
        "name": "is_spider_user",
        "cname": "爬虫用户",
        "table_type": 0,
        "create_time": "2025-10-17 23:30:28",
        "update_time": "2025-12-09 19:43:43",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "if(events.$country in ('中国','沙特阿拉伯') or events.$bot_name is not null or events.$user_agent like '%facebook%' or concat(split_part(events.$ip,'.',1),'.',split_part(events.$ip,'.',2),'.',split_part(events.$ip,'.',3)) in ('69.63.184','173.252.127','173.252.87','66.220.149','69.171.234','69.171.249','173.252.95','69.171.251','31.13.127','31.13.115','69.171.231','69.63.189','54.236.1','173.252.82','74.125.216','98.158.230','69.171.230','116.179.33','98.158.231','202.46.63','40.77.177','173.252.107','65.55.210','40.77.179','66.102.9','40.77.178','173.252.70','66.249.81','104.154.193','135.181.61','64.233.173','205.169.39','43.173.180','43.173.181','66.249.92','192.178.8','72.14.199','66.249.89','66.249.88','74.125.208','66.249.87','135.181.22','69.31.136','69.63.184','173.252.127','173.252.87','66.220.149','173.252.95','69.171.234','173.252.82','54.236.1','69.63.189','69.171.231','31.13.127','31.13.115','136.119.129'),'爬虫用户','正常用户')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 76,
        "name": "host_in_url",
        "cname": "url中的HOST",
        "table_type": 0,
        "create_time": "2025-11-14 17:00:24",
        "update_time": "2025-11-14 18:44:57",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "parse_url(if(events.$deeplink_url is null,if(events.url is null, events.$url, events.url),events.$deeplink_url),'HOST')",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 77,
        "name": "total_us",
        "cname": "除税合计Dollar",
        "table_type": 0,
        "create_time": "2025-11-29 11:02:20",
        "update_time": "2025-12-10 10:25:32",
        "data_type": "NUMBER",
        "has_dict": false,
        "expression": "if(events.site_code is null or events.site_code = 'SPUS',events.total - cast(events.tax as float), \nif(events.site_code = 'SPUK', (events.total-cast(events.tax as float) ) * 1.2987,\nif(events.site_code = 'SPAU', (events.total - cast(events.tax as float) ) * 0.6667,\nif(events.site_code = 'SPEU', (events.total - cast(events.tax as float) ) * 1.194,\nevents.total - cast(events.tax as float) ))))",
        "related_mode": "OR"
    },
    {
        "expression_source": "SQL",
        "id": 78,
        "name": "app_version_short",
        "cname": "APP版本(2位)",
        "table_type": 0,
        "create_time": "2025-12-10 11:17:39",
        "update_time": "2025-12-10 11:17:42",
        "data_type": "STRING",
        "has_dict": false,
        "expression": "concat(split_part(events.$app_version,'.',1),'.',split_part(events.$app_version,'.',2),'.X')",
        "related_mode": "AND"
    }
]